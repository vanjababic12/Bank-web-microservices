<div class="loan-requests-container">
    <p-confirmDialog></p-confirmDialog>

    <div class="centered-content" *ngIf="isLoading">
        <p-progressSpinner></p-progressSpinner>
    </div>

    <div class="centered-content" *ngIf="!isLoading && loanRequests.length === 0">
        <p>No Loan Requests At The Moment.</p>
    </div>

    <div *ngIf="!isLoading">
        <div *ngFor="let request of displayedLoanRequests" class="loan-request-card">
            <p-card>
                <div class="card-body">
                    <div class="request-details">
                        <h3>Client: {{ request.customerUsername }}</h3>
                        <p>Type Of A Loan: {{ request.loanType.name }}</p>
                        <p>Amout: {{ request.amount }}</p>
                        <p>Number Of Payments: {{ request.numberOfInstallments }}</p>
                        <p>Status:
                            <span *ngIf="!request.isReviewed">In Progress</span>
                            <span *ngIf="request.isReviewed && request.isApproved">Approved</span>
                            <span *ngIf="request.isReviewed && !request.isApproved">Rejected</span>
                        </p>
                    </div>
                    <div *ngIf="!request.isReviewed && role == 'WORKER'" class="action-buttons">
                        <button pButton type="button" icon="pi pi-check" class="p-button-success" label="Approve"
                            (click)="confirmReviewLoanRequest(request.id, true)"></button>
                        <button pButton type="button" icon="pi pi-times" class="p-button-danger" label="Reject"
                            (click)="confirmReviewLoanRequest(request.id, false)"></button>
                    </div>
                </div>
            </p-card>
        </div>
    </div>

    <p-paginator [rows]="rowsPerPage" [totalRecords]="totalLoanRequests" (onPageChange)="onPageChange($event)"
        class="paginator"></p-paginator>
</div>